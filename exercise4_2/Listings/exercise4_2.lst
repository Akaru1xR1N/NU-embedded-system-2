C51 COMPILER V9.60.7.0   EXERCISE4_2                                                       01/05/2024 04:19:10 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE EXERCISE4_2
OBJECT MODULE PLACED IN .\Objects\exercise4_2.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE exercise4_2.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listin
                    -gs\exercise4_2.lst) TABS(2) OBJECT(.\Objects\exercise4_2.obj)

line level    source

   1          #include<reg52.h> // ‡∏î‡∏∂‡∏á library ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° 8051
   2          #include<stdio.h> // ‡∏î‡∏∂‡∏á library ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡πà‡∏≤‡∏ô 
             -serial port
   3          
   4          sfr CKCON = 0x8F; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ä‡∏∑‡πà‡∏≠ CKCON ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏±
             -‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà clock
   5          sbit LED0 = P2^0; // ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ sw0 ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö port p0.0
   6          sbit LED1 = P2^1; // ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ sw0 ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö port p0.0
   7          char uart_data; // ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ä‡∏∑‡πà‡∏≠ uart_data
   8          
   9          void delay(unsigned long); // ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® prototype function
  10          void blink0(unsigned short); // ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® prototype function
  11          void blink1(unsigned short); // ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® prototype function
  12          
  13          void main(){ // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å
  14   1        CKCON = 0x01; // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà clock ‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏Å‡∏Å‡∏ß
             -‡πà‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ 2 ‡πÄ‡∏ó‡πà‡∏≤ (58.9824)
  15   1        
  16   1        /*Initial MCS51 Serial Port */
  17   1        // (1) Reset old Timer1 Mode Config
  18   1        // (2) Update Timer1 = 8 Bit Auto Reload
  19   1        // (3) Serial Port Mode 1 (N,8,1)
  20   1        // (4) Disable Serial Interrupt
  21   1        // (5) Disable Timer1 Interrupt
  22   1        // (6) SMOD1 = 0 (Disable Double Baudrate)
  23   1        // (7) Setup Timer1 Baudrate
  24   1        // (8) 9600BPS / 58.9824 MHz
  25   1        // (9) Start Timer1 Generate Baudrate
  26   1        // (10) Set TI to send First char of UART
  27   1        
  28   1        TMOD &= 0x0F;
  29   1        TMOD |= 0x20;
  30   1        SCON = 0x50;
  31   1        ES = 0;
  32   1        ET1 = 0;
  33   1        PCON &= 0x7F;
  34   1        TH1 = 0xF0;
  35   1        TL1 = 0xF0;
  36   1        TR1 = 1;
  37   1        TI = 1;
  38   1        
  39   1        P2 = 0x00; // ‡πÄ‡∏ã‡πá‡∏ï port P2 ‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 0 ‡∏ó‡∏∏‡∏Å‡∏ö‡∏¥‡∏ï
  40   1        
  41   1        while (1){ // infinite loop
  42   2          uart_data = _getkey(); // ‡∏£‡∏±‡∏ö input ‡∏à‡∏≤‡∏Å serial port
  43   2          if (uart_data == 'A'){ // ‡∏ñ‡πâ‡∏≤ uart_data == 'A'
  44   3            blink0(2);
  45   3          }
  46   2          else if (uart_data == 'B'){ // ‡∏ñ‡πâ‡∏≤ uart_data == 'B'
  47   3            blink0(4);
  48   3          }
  49   2          else if (uart_data == 'C'){ // ‡∏ñ‡πâ‡∏≤ uart_data == 'C'
  50   3            blink1(3);
  51   3          }
C51 COMPILER V9.60.7.0   EXERCISE4_2                                                       01/05/2024 04:19:10 PAGE 2   

  52   2          else if (uart_data == 'D'){ // ‡∏ñ‡πâ‡∏≤ uart_data == 'D'
  53   3            blink1(6);
  54   3          }
  55   2          else if (uart_data == 'F'){ // ‡∏ñ‡πâ‡∏≤ uart_data == 'F'
  56   3            blink0(1);
  57   3            blink1(1);
  58   3            blink0(1);
  59   3            blink1(1);
  60   3            blink0(1);
  61   3            blink1(1);
  62   3            blink0(1);
  63   3            blink1(1);
  64   3            blink0(1);
  65   3            blink1(1);
  66   3          }
  67   2        }
  68   1      }
  69          
  70          void delay(unsigned long i){ // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô delay
  71   1        while (i>0){ // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤ i ‡∏à‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 0
  72   2          i--; // ‡∏•‡∏î‡∏Ñ‡πà‡∏≤ i ‡∏•‡∏á 1
  73   2        }
  74   1        return ; // ‡πÑ‡∏°‡πà return ‡∏Ñ‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ
  75   1      }
  76          
  77          void blink0(unsigned short i){ // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô delay
  78   1        while (i>0){ // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤ i ‡∏à‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 0
  79   2          LED0 = 1; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ P2 ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö FF ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏ü‡∏ï‡∏¥‡∏
             -î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  80   2          delay(25000); // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ delay
  81   2          LED0 = 0; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ P2 ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö FF ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏ü‡∏î‡∏±‡∏
             -ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  82   2          delay(25000); // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ delay
  83   2          i--; // ‡∏•‡∏î‡∏Ñ‡πà‡∏≤ i
  84   2        }
  85   1        return ; // ‡πÑ‡∏°‡πà return ‡∏Ñ‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ
  86   1      }
  87          
  88          void blink1(unsigned short i){ // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô delay
  89   1        while (i>0){ // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤ i ‡∏à‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 0
  90   2          LED1 = 1; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ P2 ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö FF ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏ü‡∏ï‡∏¥‡∏
             -î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  91   2          delay(25000); // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ delay
  92   2          LED1 = 0; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ P2 ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö FF ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏ü‡∏î‡∏±‡∏
             -ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  93   2          delay(25000); // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ delay
  94   2          i--; // ‡∏•‡∏î‡∏Ñ‡πà‡∏≤ i
  95   2        }
  96   1        return ; // ‡πÑ‡∏°‡πà return ‡∏Ñ‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ
  97   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    262    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       8
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
